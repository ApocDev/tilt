image: gcr.io/windmill-public-containers/tilt-toast@sha256:0862c48dfc01239f1c9bf8ae0ab54a5c116d2c32bc8a36462c0b76fb308de429
tasks:
  proto:
    input_paths:
      - pkg/webview/view.proto
    output_paths:
      - pkg/webview/view.pb.go
      - pkg/webview/view.pb.gw.go
    command: protoc -I. -I/usr/include -I"$(go env GOPATH)"/src/github.com/grpc-ecosystem/grpc-gateway/third_party/googleapis --grpc-gateway_out=logtostderr=true:. --go_out=plugins=grpc,paths=source_relative:. pkg/webview/view.proto && goimports -local github.com/windmilleng/tft -w pkg/webview/view.pb.go
  wire:
    location: /go/src/github.com/windmilleng/tilt
    input_paths:
      - .
    output_paths:
      - ./internal/cli/wire_gen.go
      - ./internal/synclet/wire_gen.go
      - ./internal/engine/wire_gen.go
    command: wire ./internal/engine && wire ./internal/cli && wire ./internal/synclet && goimports -local github.com/windmilleng/tft -w internal/cli/wire_gen.go internal/synclet/wire_gen.go internal/engine/wire_gen.go
